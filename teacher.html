<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teacher Dashboard</title>
<link rel="stylesheet" href="teacher.css">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <h2>Smart Attendance</h2>
  <ul>
    <li onclick="openSection('dashboard')">Dashboard</li>
    <li onclick="openSection('classes')">Classes</li>
    <li onclick="openSection('attendance')">Take Attendance</li>
    <li onclick="openSection('records')">Attendance Records</li>
    <li onclick="openSection('defaulters')">Defaulters</li>
    <li onclick="openSection('profile')">My Profile</li>
    <li onclick="logout()">Logout</li>
  </ul>
</div>

<!-- TOPBAR -->
<div class="topbar">
  <span class="menu-btn" onclick="toggleSidebar()">â˜°</span>
  <div class="welcome-card" id="welcomeCard">Welcome, Teacher</div>
</div>

<!-- MAIN CONTENT -->
<div class="main">

  <!-- DASHBOARD -->
  <div class="section active" id="dashboard">
    <div class="cards-container">
      <div class="card" onclick="openSection('classes')">Classes</div>
      <div class="card" onclick="openSection('attendance')">Take Attendance</div>
      <div class="card" onclick="openSection('records')">Attendance Records</div>
      <div class="card" onclick="openSection('defaulters')">Defaulters</div>
    </div>
    <canvas id="attendanceChart" style="margin-top:40px; height:250px;"></canvas>
  </div>

  <!-- CLASSES -->
  <div class="section" id="classes">
    <h3>Your Classes & Subjects</h3>
    <div id="classListContainer" class="cards-container"></div>
  </div>

  <!-- ATTENDANCE -->
  <div class="section" id="attendance">
    <h3>Take Attendance</h3>
    <label for="subjectSelect">Select Subject:</label>
    <select id="subjectSelect" onchange="loadAttendanceTable()"></select>

    <table class="attendance-table">
      <thead>
        <tr><th>Roll</th><th>Name</th><th>Attendance</th></tr>
      </thead>
      <tbody id="attendanceBody"></tbody>
    </table>
    <button class="save-btn" onclick="saveAttendance()">Save Attendance</button>
  </div>

  <!-- ATTENDANCE RECORDS -->
  <div class="section" id="records">
    <h3>Attendance Records</h3>
    <label for="calendar">Select Date:</label>
    <input type="date" id="calendar" onchange="loadAttendanceRecords()">

    <table class="attendance-table">
      <thead><tr><th>Roll</th><th>Name</th><th>Status</th></tr></thead>
      <tbody id="recordBody"></tbody>
    </table>
  </div>

  <!-- DEFAULTERS -->
  <div class="section" id="defaulters">
    <h3>Defaulters</h3>
    <table class="defaulter-table">
      <thead><tr><th>Roll</th><th>Name</th><th>Absent %</th></tr></thead>
      <tbody id="defaulterBody"></tbody>
    </table>
  </div>

  <!-- PROFILE -->
  <div class="section" id="profile">
    <h3>My Profile</h3>
    <label>Name:</label>
    <input type="text" id="profileName"><br><br>
    <label>Email (read-only):</label>
    <input type="text" id="profileEmail" readonly><br><br>
    <button class="save-btn" onclick="saveProfile()">Save Profile</button>
  </div>

</div>

<script src="teacher.js"></script>
</body>
</html>
