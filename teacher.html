<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teacher Dashboard | Smart Attendance</title>

  <!-- CSS -->
  <link rel="stylesheet" href="teacher.css" />

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- ================= SIDEBAR ================= -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <h2>Smart Attendance</h2>
  </div>

  <nav>
    <ul>
      <li onclick="openSection('dashboard')">ğŸ  Dashboard</li>
      <li onclick="openSection('classes')">ğŸ« My Classes</li>
      <li onclick="openSection('attendance')">ğŸ“ Take Attendance</li>
      <li onclick="openSection('records')">ğŸ“… Attendance Records</li>
      <li onclick="openSection('defaulters')">âš ï¸ Defaulters</li>
      <li onclick="openSection('profile')">ğŸ‘¤ My Profile</li>
      <li onclick="logout()">ğŸšª Logout</li>
    </ul>
  </nav>
</aside>

<!-- Overlay for mobile -->
<div id="overlay" onclick="toggleSidebar()"></div>

<!-- ================= TOPBAR ================= -->
<header class="topbar">
  <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
  <div class="topbar-title">Teacher Dashboard</div>
</header>
  <button class="menu-btn" onclick="toggleTheme()">ğŸŒ—</button>

<!-- ================= MAIN CONTENT ================= -->
<main class="main">

  <!-- ===== DASHBOARD ===== -->
  <section class="section active" id="dashboard">
    <div class="welcome-card" id="welcomeCard">
      Welcome ğŸ‘‹
    </div>

    <div class="cards-container">
      <div class="card" onclick="openSection('classes')">
        <h3>My Classes</h3>
        <p>View assigned classes & subjects</p>
      </div>

      <div class="card" onclick="openSection('attendance')">
        <h3>Take Attendance</h3>
        <p>Mark present / absent per subject</p>
      </div>

      <div class="card" onclick="openSection('records')">
        <h3>Attendance Records</h3>
        <p>View saved attendance</p>
      </div>

      <div class="card" onclick="openSection('defaulters')">
        <h3>Defaulters</h3>
        <p>Low attendance students</p>
      </div>
    </div>

    <div class="chart-card">
      <canvas id="attendanceChart"></canvas>
    </div>
  </section>

  <!-- ===== CLASSES ===== -->
  <section class="section" id="classes">
    <h2>My Classes & Subjects</h2>
    <div id="classListContainer" class="cards-container"></div>
  </section>

  <!-- ===== ATTENDANCE ===== -->
  <section class="section" id="attendance">
    <h2>Take Attendance</h2>

    <div class="form-group">
      <label>Select Class & Subject</label>
      <select id="subjectSelect" onchange="loadAttendanceTable()">
        <option value="">-- Select --</option>
      </select>
    </div>

    <div class="table-wrapper">
      <table class="attendance-table">
        <thead>
          <tr>
            <th>Roll No</th>
            <th>Student Name</th>
            <th>Attendance</th>
          </tr>
        </thead>
        <tbody id="attendanceBody"></tbody>
      </table>
    </div>

    <button class="save-btn" onclick="saveAttendance()">Save Attendance</button>
  </section>

  <!-- ===== RECORDS ===== -->
  <section class="section" id="records">
    <h2>Attendance Records</h2>

    <div class="form-group">
      <label>Select Date</label>
      <input type="date" id="calendar" onchange="loadAttendanceRecords()" />
    </div>

    <div class="table-wrapper">
      <table class="attendance-table">
        <thead>
          <tr>
            <th>Roll No</th>
            <th>Name</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="recordBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ===== DEFAULTERS ===== -->
  <section class="section" id="defaulters">
    <h2>Defaulters List</h2>

    <div class="table-wrapper">
      <table class="defaulter-table">
        <thead>
          <tr>
            <th>Roll No</th>
            <th>Name</th>
            <th>Absent %</th>
          </tr>
        </thead>
        <tbody id="defaulterBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ===== PROFILE ===== -->
  <section class="section" id="profile">
    <h2>My Profile</h2>

    <div class="profile-card">
      <div class="form-group">
        <label>Name</label>
        <input type="text" id="profileName" />
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" id="profileEmail" readonly />
      </div>

      <button class="save-btn" onclick="saveProfile()">Save Profile</button>
    </div>
  </section>

</main>

<!-- JS -->
<script src="teacher.js"></script>
</body>
</html>
